"use strict";(globalThis.webpackChunkmantle_estate_docs=globalThis.webpackChunkmantle_estate_docs||[]).push([[837],{4812(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"formulas/pnl","title":"Profit and Loss (P&L) Calculation","description":"Profit and loss are calculated when closing a position based on the difference between entry price and exit price.","source":"@site/docs/formulas/pnl.md","sourceDirName":"formulas","slug":"/formulas/pnl","permalink":"/docs/formulas/pnl","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Fill Price and Price Impact Calculation","permalink":"/docs/formulas/fill-price"},"next":{"title":"Smart Contracts","permalink":"/docs/contracts/overview"}}');var l=s(4848),r=s(8453);const t={},a="Profit and Loss (P&L) Calculation",c={},d=[{value:"Formulas",id:"formulas",level:2},{value:"For Long Position",id:"for-long-position",level:3},{value:"For Short Position",id:"for-short-position",level:3},{value:"Parameters",id:"parameters",level:2},{value:"Explanation",id:"explanation",level:2},{value:"Gross P&amp;L",id:"gross-pl",level:3},{value:"Net P&amp;L",id:"net-pl",level:3},{value:"Return Amount",id:"return-amount",level:3},{value:"Calculation Examples",id:"calculation-examples",level:2},{value:"Example 1: Profitable Long Position",id:"example-1-profitable-long-position",level:3},{value:"Example 2: Losing Long Position",id:"example-2-losing-long-position",level:3},{value:"Example 3: Profitable Short Position",id:"example-3-profitable-short-position",level:3},{value:"Leverage Impact",id:"leverage-impact",level:2},{value:"Leverage Example",id:"leverage-example",level:3}];function o(e){const n={annotation:"annotation",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",math:"math",mi:"mi",mn:"mn",mo:"mo",mrow:"mrow",mtext:"mtext",p:"p",pre:"pre",semantics:"semantics",span:"span",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"profit-and-loss-pl-calculation",children:"Profit and Loss (P&L) Calculation"})}),"\n",(0,l.jsx)(n.p,{children:"Profit and loss are calculated when closing a position based on the difference between entry price and exit price."}),"\n",(0,l.jsx)(n.h2,{id:"formulas",children:"Formulas"}),"\n",(0,l.jsx)(n.h3,{id:"for-long-position",children:"For Long Position"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"grossPnl = (exitPrice - entryPrice) \xd7 quantity\r\nnetPnl = grossPnl - openingFee - closingFee\r\nreturnAmount = marginRequired + netPnl\n"})}),"\n",(0,l.jsx)(n.h3,{id:"for-short-position",children:"For Short Position"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"grossPnl = (entryPrice - exitPrice) \xd7 quantity\r\nnetPnl = grossPnl - openingFee - closingFee\r\nreturnAmount = marginRequired + netPnl\n"})}),"\n",(0,l.jsx)(n.h2,{id:"parameters",children:"Parameters"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Parameter"}),(0,l.jsx)(n.th,{children:"Description"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"entryPrice"})}),(0,l.jsx)(n.td,{children:"Entry price (Fill Price when opening)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"exitPrice"})}),(0,l.jsx)(n.td,{children:"Exit price (Index Price when closing)"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"quantity"})}),(0,l.jsxs)(n.td,{children:["Quantity in square meters (",(0,l.jsx)(n.code,{children:"quantity_sqm"}),")"]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"openingFee"})}),(0,l.jsxs)(n.td,{children:["Opening fee: ",(0,l.jsx)(n.code,{children:"positionValue \xd7 0.001"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"closingFee"})}),(0,l.jsxs)(n.td,{children:["Closing fee: ",(0,l.jsx)(n.code,{children:"currentValue \xd7 0.001"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"marginRequired"})}),(0,l.jsx)(n.td,{children:"Margin used when opening the position"})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"positionValue"})}),(0,l.jsxs)(n.td,{children:["Position value when opening: ",(0,l.jsx)(n.code,{children:"amountUsd \xd7 leverage"})]})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"currentValue"})}),(0,l.jsxs)(n.td,{children:["Current position value: ",(0,l.jsx)(n.code,{children:"quantity \xd7 exitPrice"})]})]})]})]}),"\n",(0,l.jsx)(n.h2,{id:"explanation",children:"Explanation"}),"\n",(0,l.jsx)(n.h3,{id:"gross-pl",children:"Gross P&L"}),"\n",(0,l.jsx)(n.p,{children:"Gross P&L is profit/loss before fees:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Long position:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["If ",(0,l.jsx)(n.code,{children:"exitPrice > entryPrice"})," \u2192 profit"]}),"\n",(0,l.jsxs)(n.li,{children:["If ",(0,l.jsx)(n.code,{children:"exitPrice < entryPrice"})," \u2192 loss"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Short position:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["If ",(0,l.jsx)(n.code,{children:"exitPrice < entryPrice"})," \u2192 profit"]}),"\n",(0,l.jsxs)(n.li,{children:["If ",(0,l.jsx)(n.code,{children:"exitPrice > entryPrice"})," \u2192 loss"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"net-pl",children:"Net P&L"}),"\n",(0,l.jsx)(n.p,{children:"Net P&L is profit/loss after fees:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mtext,{children:"netPnl"}),(0,l.jsx)(n.mo,{children:"="}),(0,l.jsx)(n.mtext,{children:"grossPnl"}),(0,l.jsx)(n.mo,{children:"\u2212"}),(0,l.jsx)(n.mtext,{children:"openingFee"}),(0,l.jsx)(n.mo,{children:"\u2212"}),(0,l.jsx)(n.mtext,{children:"closingFee"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\text{netPnl} = \\text{grossPnl} - \\text{openingFee} - \\text{closingFee}"})]})})}),(0,l.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"netPnl"})}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(n.span,{className:"mrel",children:"="}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"grossPnl"})}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(n.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8778em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"openingFee"})}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(n.span,{className:"mbin",children:"\u2212"}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"closingFee"})})]})]})]})}),"\n",(0,l.jsx)(n.h3,{id:"return-amount",children:"Return Amount"}),"\n",(0,l.jsx)(n.p,{children:"Return Amount is the amount returned to the trader's balance:"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mtext,{children:"returnAmount"}),(0,l.jsx)(n.mo,{children:"="}),(0,l.jsx)(n.mtext,{children:"marginRequired"}),(0,l.jsx)(n.mo,{children:"+"}),(0,l.jsx)(n.mtext,{children:"netPnl"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"\\text{returnAmount} = \\text{marginRequired} + \\text{netPnl}"})]})})}),(0,l.jsxs)(n.span,{className:"katex-html","aria-hidden":"true",children:[(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6833em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"returnAmount"})}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}}),(0,l.jsx)(n.span,{className:"mrel",children:"="}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2778em"}})]}),(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.8889em",verticalAlign:"-0.1944em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"marginRequired"})}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}}),(0,l.jsx)(n.span,{className:"mbin",children:"+"}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.2222em"}})]}),(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"0.6944em"}}),(0,l.jsx)(n.span,{className:"mord text",children:(0,l.jsx)(n.span,{className:"mord",children:"netPnl"})})]})]})]})}),"\n",(0,l.jsxs)(n.p,{children:["If ",(0,l.jsx)(n.code,{children:"netPnl > 0"}),", the trader receives more than invested. If ",(0,l.jsx)(n.code,{children:"netPnl < 0"}),", the trader receives less."]}),"\n",(0,l.jsx)(n.h2,{id:"calculation-examples",children:"Calculation Examples"}),"\n",(0,l.jsx)(n.h3,{id:"example-1-profitable-long-position",children:"Example 1: Profitable Long Position"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Opening conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Amount USD = $10,000"}),"\n",(0,l.jsx)(n.li,{children:"Leverage = 2x"}),"\n",(0,l.jsx)(n.li,{children:"Entry Price = $300,000"}),"\n",(0,l.jsxs)(n.li,{children:["Quantity = 0.0667 sqm (calculated: ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mn,{children:"20"}),(0,l.jsx)(n.mo,{separator:"true",children:","}),(0,l.jsx)(n.mn,{children:"000"}),(0,l.jsx)(n.mi,{mathvariant:"normal",children:"/"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"20,000 / "})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(n.span,{className:"mord",children:"20"}),(0,l.jsx)(n.span,{className:"mpunct",children:","}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,l.jsx)(n.span,{className:"mord",children:"000/"})]})})]}),"300,000)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Closing conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Exit Price = $315,000"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Calculation:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"positionValue = $10,000 \xd7 2 = $20,000\r\nopeningFee = $20,000 \xd7 0.001 = $20\r\ncurrentValue = 0.0667 \xd7 $315,000 = $21,010.50\r\nclosingFee = $21,010.50 \xd7 0.001 = $21.01\r\n\r\ngrossPnl = ($315,000 - $300,000) \xd7 0.0667 = $1,000.50\r\nnetPnl = $1,000.50 - $20 - $21.01 = $959.49\r\nreturnAmount = $10,000 + $959.49 = $10,959.49\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-2-losing-long-position",children:"Example 2: Losing Long Position"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Opening conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Amount USD = $10,000"}),"\n",(0,l.jsx)(n.li,{children:"Leverage = 2x"}),"\n",(0,l.jsx)(n.li,{children:"Entry Price = $300,000"}),"\n",(0,l.jsx)(n.li,{children:"Quantity = 0.0667 sqm"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Closing conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Exit Price = $285,000"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Calculation:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"positionValue = $10,000 \xd7 2 = $20,000\r\nopeningFee = $20,000 \xd7 0.001 = $20\r\ncurrentValue = 0.0667 \xd7 $285,000 = $19,009.50\r\nclosingFee = $19,009.50 \xd7 0.001 = $19.01\r\n\r\ngrossPnl = ($285,000 - $300,000) \xd7 0.0667 = -$1,000.50\r\nnetPnl = -$1,000.50 - $20 - $19.01 = -$1,039.51\r\nreturnAmount = $10,000 - $1,039.51 = $8,960.49\n"})}),"\n",(0,l.jsx)(n.h3,{id:"example-3-profitable-short-position",children:"Example 3: Profitable Short Position"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Opening conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Amount USD = $10,000"}),"\n",(0,l.jsx)(n.li,{children:"Leverage = 1x"}),"\n",(0,l.jsx)(n.li,{children:"Entry Price = $300,000"}),"\n",(0,l.jsxs)(n.li,{children:["Quantity = 0.0333 sqm (calculated: ",(0,l.jsxs)(n.span,{className:"katex",children:[(0,l.jsx)(n.span,{className:"katex-mathml",children:(0,l.jsx)(n.math,{xmlns:"http://www.w3.org/1998/Math/MathML",children:(0,l.jsxs)(n.semantics,{children:[(0,l.jsxs)(n.mrow,{children:[(0,l.jsx)(n.mn,{children:"10"}),(0,l.jsx)(n.mo,{separator:"true",children:","}),(0,l.jsx)(n.mn,{children:"000"}),(0,l.jsx)(n.mi,{mathvariant:"normal",children:"/"})]}),(0,l.jsx)(n.annotation,{encoding:"application/x-tex",children:"10,000 / "})]})})}),(0,l.jsx)(n.span,{className:"katex-html","aria-hidden":"true",children:(0,l.jsxs)(n.span,{className:"base",children:[(0,l.jsx)(n.span,{className:"strut",style:{height:"1em",verticalAlign:"-0.25em"}}),(0,l.jsx)(n.span,{className:"mord",children:"10"}),(0,l.jsx)(n.span,{className:"mpunct",children:","}),(0,l.jsx)(n.span,{className:"mspace",style:{marginRight:"0.1667em"}}),(0,l.jsx)(n.span,{className:"mord",children:"000/"})]})})]}),"300,000)"]}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Closing conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Exit Price = $285,000"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Calculation:"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"positionValue = $10,000 \xd7 1 = $10,000\r\nopeningFee = $10,000 \xd7 0.001 = $10\r\ncurrentValue = 0.0333 \xd7 $285,000 = $9,490.50\r\nclosingFee = $9,490.50 \xd7 0.001 = $9.49\r\n\r\ngrossPnl = ($300,000 - $285,000) \xd7 0.0333 = $499.50\r\nnetPnl = $499.50 - $10 - $9.49 = $480.01\r\nreturnAmount = $10,000 + $480.01 = $10,480.01\n"})}),"\n",(0,l.jsx)(n.h2,{id:"leverage-impact",children:"Leverage Impact"}),"\n",(0,l.jsx)(n.p,{children:"Leverage increases both potential profit and potential loss:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Without leverage (1x)"}),": 5% price change \u2192 5% P&L change"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"With leverage (2x)"}),": 5% price change \u2192 10% P&L change"]}),"\n"]}),"\n",(0,l.jsx)(n.h3,{id:"leverage-example",children:"Leverage Example"}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Conditions:"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"Amount USD = $10,000"}),"\n",(0,l.jsx)(n.li,{children:"Leverage = 2x"}),"\n",(0,l.jsx)(n.li,{children:"Entry Price = $300,000"}),"\n",(0,l.jsx)(n.li,{children:"Exit Price = $315,000 (5% increase)"}),"\n"]}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"Without leverage (1x):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"positionValue = $10,000\r\nquantity = $10,000 / $300,000 = 0.0333 sqm\r\ngrossPnl = ($315,000 - $300,000) \xd7 0.0333 = $500\n"})}),"\n",(0,l.jsx)(n.p,{children:(0,l.jsx)(n.strong,{children:"With leverage (2x):"})}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{children:"positionValue = $20,000\r\nquantity = $20,000 / $300,000 = 0.0667 sqm\r\ngrossPnl = ($315,000 - $300,000) \xd7 0.0667 = $1,000\n"})}),"\n",(0,l.jsx)(n.p,{children:"P&L doubles when using 2x leverage."})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(o,{...e})}):o(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>a});var i=s(6540);const l={},r=i.createContext(l);function t(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:t(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);